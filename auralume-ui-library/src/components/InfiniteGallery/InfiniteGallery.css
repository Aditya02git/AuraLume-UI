/* InfiniteGallery.css */

.infinite-gallery {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow: hidden; /* Critical: This clips any content outside viewport */
  background-color: #000;
  /* Ensure hardware acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.infinite-gallery-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden; /* Double layer of clipping for safety */
  /* Hardware acceleration for smooth performance */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: contents;
}

.infinite-gallery-row {
  position: absolute;
  /* Hardware acceleration */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

.infinite-gallery-image {
  position: absolute;
  top: 0;
  left: 0;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  border: none;
  /* box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); */
  transition: transform 0.2s ease-out;
  /* Hardware acceleration for smooth transforms */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  overflow: hidden; /* Important for vignette clipping */
}

.infinite-gallery-image:hover {
  transform: scale(1.02) translateZ(0);
  -webkit-transform: scale(1.02) translateZ(0);
  /* box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2); */
  z-index: 10;
}

.infinite-gallery-mask {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 999;
  cursor: grab;
  /* Prevent text selection */
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  /* Prevent touch actions */
  touch-action: none;
  -webkit-touch-callout: none;
  /* Transparent background but captures events */
  background: transparent;
}

.infinite-gallery-mask:active {
  cursor: grabbing;
}

/* Loading placeholder styles */
.infinite-gallery-image:empty,
.infinite-gallery-image[style*="background-image: none"] {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0.1) 100%
  );
  position: relative;
  overflow: hidden;
}

/* Performance optimizations */
.infinite-gallery * {
  -webkit-transform-style: preserve-3d;
  transform-style: preserve-3d;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  /* Optimize for animations and lerp effects */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Enable GPU acceleration */
  will-change: transform, opacity, filter;
}

/* Smooth cursor interactions */
.infinite-gallery-container {
  transition: transform 0.1s ease-out;
}

/* Enhanced vignette effect - now much more prominent */
.infinite-gallery-image::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  /* Strong vignette overlay with multiple layers */
  background: 
    /* Outer dark ring */
    radial-gradient(
      ellipse at center,
      transparent 20%,
      rgba(0, 0, 0, 0.2) 40%,
      rgba(0, 0, 0, 0.4) 60%,
      rgba(0, 0, 0, 0.6) 80%,
      rgba(0, 0, 0, 0.8) 100%
    ),
    /* Inner shadow for depth */
    radial-gradient(
      circle at center,
      transparent 30%,
      rgba(0, 0, 0, 0.1) 50%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0.5) 90%,
      rgba(0, 0, 0, 0.7) 100%
    );
  pointer-events: none;
  opacity: 1;
  transition: opacity 0.3s ease-out;
  z-index: 1;
}

/* Alternative vignette styles for different themes */

/* Subtle warm vignette */
.infinite-gallery.warm .infinite-gallery-image::before {
  background: 
    radial-gradient(
      ellipse at center,
      transparent 25%,
      rgba(139, 69, 19, 0.1) 45%,
      rgba(101, 67, 33, 0.2) 65%,
      rgba(62, 39, 35, 0.4) 85%,
      rgba(0, 0, 0, 0.6) 100%
    );
}

/* Cool blue vignette */
.infinite-gallery.cool .infinite-gallery-image::before {
  background: 
    radial-gradient(
      ellipse at center,
      transparent 25%,
      rgba(25, 25, 112, 0.1) 45%,
      rgba(72, 61, 139, 0.2) 65%,
      rgba(47, 79, 79, 0.4) 85%,
      rgba(0, 0, 0, 0.6) 100%
    );
}

/* Refined Vintage Sepia with Brownish Vignette */
.infinite-gallery.vintage {
  background: radial-gradient(circle at center, #d2b48c 0%, #a07855 80%, #4e3b31 100%);
  background-blend-mode: multiply;
  filter: contrast(1.05) brightness(0.9);
  position: relative;
  overflow: hidden;
}

.infinite-gallery.vintage::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    repeating-linear-gradient(
      45deg,
      rgba(139, 69, 19, 0.04) 0px,
      rgba(139, 69, 19, 0.04) 2px,
      transparent 2px,
      transparent 4px
    ),
    radial-gradient(
      circle at center,
      rgba(0, 0, 0, 0) 40%,
      rgba(101, 67, 33, 0.3) 65%,
      rgba(80, 50, 20, 0.5) 80%,
      rgba(62, 39, 35, 0.75) 100%
    );
  mix-blend-mode: multiply;
  pointer-events: none;
  z-index: 1;
}

/* Subtle noise overlay */
.infinite-gallery.vintage::after {
  content: "";
  position: absolute;
  inset: 0;
  background: url("https://www.transparenttextures.com/patterns/noise.png");
  opacity: 0.18;
  mix-blend-mode: overlay;
  pointer-events: none;
  z-index: 2;
}

.infinite-gallery.vintage .infinite-gallery-background {
  background: linear-gradient(135deg, #c8a97e 0%, #8b5e3c 100%);
}

.infinite-gallery.vintage .infinite-gallery-image::before {
  background: radial-gradient(
    ellipse at center,
    transparent 30%,
    rgba(160, 82, 45, 0.15) 50%,
    rgba(139, 69, 19, 0.3) 70%,
    rgba(101, 67, 33, 0.45) 85%,
    rgba(62, 39, 35, 0.65) 100%
  );
  mix-blend-mode: multiply;
}


/* Strong dramatic vignette */
.infinite-gallery.dramatic .infinite-gallery-image::before {
  background: 
    radial-gradient(
      ellipse at center,
      transparent 15%,
      rgba(0, 0, 0, 0.1) 25%,
      rgba(0, 0, 0, 0.3) 40%,
      rgba(0, 0, 0, 0.5) 60%,
      rgba(0, 0, 0, 0.7) 80%,
      rgba(0, 0, 0, 0.9) 100%
    );
}

/* Hover effects for vignette */
.infinite-gallery-image:hover::before {
  opacity: 0.8; /* Slightly reduce vignette on hover to brighten the image */
  transition: opacity 0.2s ease-out;
}

/* Additional inner glow effect for enhanced depth */
.infinite-gallery-image::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  right: 2px;
  bottom: 2px;
  border-radius: inherit;
  background: 
    radial-gradient(
      circle at center,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.05) 20%,
      transparent 40%
    );
  pointer-events: none;
  opacity: 0.6;
  z-index: 2;
  transition: opacity 0.3s ease-out;
}

.infinite-gallery-image:hover::after {
  opacity: 0.8;
  transform: scale(1.05);
}

/* Theme variations with background layer support */
.infinite-gallery.dark {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

.infinite-gallery.dark .infinite-gallery-background {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

.infinite-gallery.light {
  background: linear-gradient(135deg, #ffffff 0%, #e6f0ff 100%);
}

.infinite-gallery.light .infinite-gallery-background {
  background: linear-gradient(135deg, #ffffff 0%, #e6f0ff 100%);
}

.infinite-gallery.minimal {
  background: #f8f9fa;
}

.infinite-gallery.minimal .infinite-gallery-background {
  background: #f8f9fa;
}

.infinite-gallery.minimal .infinite-gallery-image {
  border-radius: 4px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  border: none;
}

/* Minimal theme gets lighter vignette */
.infinite-gallery.minimal .infinite-gallery-image::before {
  background: 
    radial-gradient(
      ellipse at center,
      transparent 40%,
      rgba(0, 0, 0, 0.05) 60%,
      rgba(0, 0, 0, 0.15) 80%,
      rgba(0, 0, 0, 0.25) 100%
    );
  opacity: 0.8;
}

/* Custom scrollbar prevention */
.infinite-gallery::-webkit-scrollbar {
  display: none;
}

.infinite-gallery {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .infinite-gallery-image {
    border-radius: 6px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .infinite-gallery-image:hover {
    transform: scale(1.01) translateZ(0);
    -webkit-transform: scale(1.01) translateZ(0);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }
  
  /* Lighter vignette on mobile for better visibility */
  .infinite-gallery-image::before {
    opacity: 0.8;
  }
}

@media (max-width: 480px) {
  .infinite-gallery-image {
    border-radius: 4px;
  }
  
  /* Even lighter vignette on small screens */
  .infinite-gallery-image::before {
    opacity: 0.6;
  }
}

/* Loading state */
.infinite-gallery.loading {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: rgba(255, 255, 255, 0.7);
  background: #000;
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .infinite-gallery-image {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Prevent any potential content bleeding on all sides */
.infinite-gallery {
  clip-path: inset(0);
  -webkit-clip-path: inset(0);
}
